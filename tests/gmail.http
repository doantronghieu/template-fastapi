### Variables
@BASE_URL = http://127.0.0.1:8000
@API_PATH = {{BASE_URL}}/api/integrations/gmail
# Read API_KEY from .env file
@API_KEY = {{$dotenv API_KEY}}

### Get today's emails (Vietnam timezone)
GET {{API_PATH}}/today?limit=50
X-API-Key: {{API_KEY}}

### Get today's emails with higher limit
GET {{API_PATH}}/today?limit=100
X-API-Key: {{API_KEY}}

### Get yesterday's emails (Vietnam timezone)
GET {{API_PATH}}/yesterday?limit=50
X-API-Key: {{API_KEY}}

### Get yesterday's emails with higher limit
GET {{API_PATH}}/yesterday?limit=100
X-API-Key: {{API_KEY}}

### Search unread emails
POST {{API_PATH}}/search
X-API-Key: {{API_KEY}}
Content-Type: application/json

{
  "unread_only": true,
  "limit": 10
}

### Search by date range
POST {{API_PATH}}/search
Content-Type: application/json
X-API-Key: {{API_KEY}}

{
  "since_date": "2024-10-01T00:00:00Z",
  "before_date": "2024-10-13T23:59:59Z",
  "limit": 20
}

### Search by sender
POST {{API_PATH}}/search
Content-Type: application/json
X-API-Key: {{API_KEY}}

{
  "from_email": "tpbank@tpb.com.vn",
  "limit": 10
}

### Search with multiple filters
POST {{API_PATH}}/search
Content-Type: application/json
X-API-Key: {{API_KEY}}

{
  "since_date": "2024-10-01T00:00:00Z",
  "unread_only": true,
  "subject_contains": "order",
  "limit": 15
}

### Advanced: Search with raw IMAP criteria (large emails with flag)
POST {{API_PATH}}/search
Content-Type: application/json
X-API-Key: {{API_KEY}}

{
  "raw_criteria": ["LARGER", "1000000", "FLAGGED"],
  "limit": 10
}

### Advanced: Search with raw IMAP criteria (recent emails)
POST {{API_PATH}}/search
Content-Type: application/json
X-API-Key: {{API_KEY}}

{
  "raw_criteria": ["SINCE", "01-Oct-2024", "FROM", "tpbank@tpb.com.vn"],
  "limit": 20
}

### Get all emails (default limit)
POST {{API_PATH}}/search
Content-Type: application/json
X-API-Key: {{API_KEY}}

{
  "limit": 50
}
